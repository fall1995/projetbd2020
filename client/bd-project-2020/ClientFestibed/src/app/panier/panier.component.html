<div class="ui-g">
    <div class="ui-sm-12 ui-md-10 ui-md-offset-1 border border-info  panel panel-default">
        <div class="jumbotron jumbotron-fluid" id="jumbtronRemovePaddingLeft">
            <div class="container">
                <div class="ui-g" *ngIf="(panier&&panier.length>0)||(movie&&movie.length>0)">
                    <div class="ui-sm-12 ui-md-7" style="margin-left:1.7em" id="convertToFacture">


                            <p-accordion [multiple]="true" >
                                <p-accordionTab [selected]="true" header="Vos films">
                                        <div class="ui-g" style="text-align:center;" *ngIf="!movie||movie.length==0">
                                            <div class="ui-sm-3 ui-md-offset-1"><h4>Aucun film dans votre panier</h4></div>
                                            <div class="ui-sm-3 ui-md-offset-1">
                                                <button type="button" routerLink="/films" class="btn btn-primary btn-lg btn-block">Choisir des films</button>
                                            </div>
                                        </div> 

                                        <div class="ui-sm-12 ui-md-12 border border-info panel panel-default" *ngFor="let film of movie; let i = index" [attr.data-index]="i">
                                                <div class="card" > 
                                                    <div class="row">
                                                        <div class="col-md-4" *ngIf="film.poster_path">
                                                            <img src="{{this.tmdbService.host+film?.poster_path}}" class="card-img film" style="max-width: 9em;">
                                                        </div>
                                                        <div class="col-md-4" *ngIf="!film.poster_path">
                                                            <img src="https://www.ville.magog.qc.ca/bibliotheque/wp-content/uploads/2015/09/image-non-disponible.png" class="card-img film" style="max-width: 9em;">
                                                        </div>
                                                        <div class="col-md-8">
                                                            <div class="card-body">
                                                                <div class="ui-g">
                                                                <div class="ui-sm-12 ui-md-10">
                                                                    <h3 class="card-title">{{film.title}}</h3>
                                                                    <div class="text-muted" style="padding-left: 0;">
                                                                        <h5>{{ film.overview | truncate : 180 }}</h5>
                                                                    </div>
                                                                </div>
                                                                <div class="ui-sm-12 ui-md-2" style="margin-top:2em">
                                                                    <h5 class="card-title">3.79€</h5>
                                                                    <button id="supprimerBoutton" type="button" (click)="deleteMovieSelected(i)"
                                                                        class="btn btn-danger btn-sm" style="margin-top:2em"><i class="fa fa-trash"></i>
                                                                    </button>
                                                                </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                </p-accordionTab>
                                <p-accordionTab [selected]="true" header="Vos repas">
                                        <div class="ui-g" style="text-align:center;" *ngIf="!panier||panier.length==0">
                                                <div class="ui-sm-3 ui-md-offset-1"><h4>Aucun repas dans votre panier</h4></div>
                                                <div class="ui-sm-3 ui-md-offset-1">
                                                    <button type="button" routerLink="/menus" class="btn btn-primary btn-lg btn-block">Choisir des repas</button>
                                                </div>
                                            </div> 

                                        <div class="ui-sm-12 ui-md-12 border border-info panel panel-default" *ngFor="let plat of panier; let i = index" [attr.data-index]="i">
                                                <div class="card"> 
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <img src="{{plat.image}}" class="card-img plat" style="max-width: 13em;">
                                                        </div>
                                                        <div class="col-md-8">
                                                            <div class="card-body">
                                                                <div class="ui-g">
                                                                    <div class="ui-sm-12 ui-md-10">
                                                                        <h3 class="card-title">{{plat.id}}</h3>
                                                                        <div class="text-muted" style="padding-left: 0;">
                                                                            <h5>{{ plat.type }}</h5>
                                                                        </div>
                                                                    </div>
                                                                    <div class="ui-sm-12 ui-md-2" style="margin-top:.5em">
                                                                        <h5 class="card-title">{{plat.prix}}€</h5>
                                                                        <button id="supprimerBoutton" type="button" (click)="deleteMovieSelected(i)"
                                                                            class="btn btn-danger btn-sm" style="margin-top:2em"><i class="fa fa-trash"></i>
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                               </p-accordionTab>
                            </p-accordion>

                    </div>
                    <div class="ui-sm-12 ui-md-4 border border-info  panel panel-default"   id="infosClients" >
                        <h2 style="margin-left:0.8em;"><b>Total</b></h2> <br>
                        <h4 style="margin-left:1.5em;">Sous-total films  
                            <span id="priceRightAlign"> {{totalMovie}}€</span>
                        </h4><br>
                        <h4 style="margin-left:1.5em;">Sous-total repas
                            <span id="priceRightAlign"> {{totalMenu}}€</span>
                        </h4><br>
                        <h4 style="margin-left:1.5em;">Livraison
                            <span id="priceRightAlign"> <b>Offerte</b></span>
                        </h4>
                        <mat-list>
                            <mat-divider></mat-divider>
                        </mat-list> <br>
                        <h4 style="margin-left:1.5em;"><b>Total
                            <span id="priceRightAlign"> {{total}}€</span>
                        </b></h4>
                        <mat-list>
                            <mat-divider></mat-divider>
                        </mat-list> <br>
                        <h4 *ngIf="user" style="margin-left:1em;">
                            <button  [routerLink]="['/confirmer-commande']" type="button" class="btn btn-outline-success">Valider mon panier</button>

                            <span style="float:right; margin-right: 0.8em;">
                                <button mat-button [matMenuTriggerFor]="menu" >Continuer mes achats</button>
                                <mat-menu #menu="matMenu" >
                                    <button mat-menu-item [routerLink]="['/films']" >Retourner aux films</button>
                                    <button mat-menu-item [routerLink]="['/menus']" >Retourner aux plats</button>
                                </mat-menu>
                            </span>

                        </h4>
                        <h4 *ngIf="!user" style="margin-left:1.5em;">Connectez-vous pour commander
                                <div class="ui-g" style="margin-right: 4em;"> 
                                    <div class="ui-md-7">
                                        <button type="button" routerLink="/authentification/signin" class="btn btn-primary btn-lg"><h5>J'ai un compte</h5></button>
                                    </div>
                                    <div class="ui-md-4">
                                        <button type="button" routerLink="/authentification/signup" class="btn btn-primary btn-lg"><h5>Je suis nouveau</h5></button>
                                    </div>
                                </div>
                        </h4>



                    </div>
                    
                </div>





                

                <div class="ui-g" *ngIf="(!panier||panier.length==0)&&(!movie||movie.length==0)">
                        <div class="ui-sm-12 ui-md-8 ui-md-offset-2 alert alert-info" role="alert">
                            <h3 style="text-align:center;">Votre panier est vide :(</h3>
                        </div>
                </div>
                <div class="ui-g" *ngIf="(!panier||panier.length==0)&&(!movie||movie.length==0)">
                        <div class="ui-sm-12 ui-md-8 ui-md-offset-3" role="alert">
                            <div class="ui-g">
                                <div class="ui-sm-3 ui-md-offset-1">
                                    <button type="button" routerLink="/films" class="btn btn-primary btn-lg btn-block">Découvrez nos films</button>
                                </div>
                                <div class="ui-sm-3 ui-md-offset-1">
                                    <button type="button" routerLink="/menus" class="btn btn-primary btn-lg btn-block">Découvrez nos plats</button>
                                </div>
                            </div>
                        </div>
                </div>
                

            </div>
        </div>
    </div>

</div>
